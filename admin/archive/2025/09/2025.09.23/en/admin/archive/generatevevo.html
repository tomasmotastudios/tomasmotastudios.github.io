<!DOCTYPE html>
<html lang="en-GB">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
  <title>Gerador de Códigos - Tomás Mota</title>
  <style>
    body {
      background: 
        radial-gradient(circle at 15% 20%, rgba(255, 255, 255, 0.534), transparent 50%),
        radial-gradient(circle at 85% 80%, #f7f7f7a9, transparent 50%),
        linear-gradient(180deg, #464749 0%, #141b2a 100%);
      min-height: 100vh;
      color: white;
      font-family: sans-serif;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .card {
      background-color: rgba(15, 22, 32, 0.8);
      backdrop-filter: blur(10px);
      border-radius: 1rem;
      padding: 2rem;
      max-width: 500px;
      width: 100%;
    }

    .codigo {
      background-color: rgba(30,30,30,0.8);
      padding: 0.5rem;
      border-radius: 0.5rem;
      font-family: monospace;
    }

    button {
      transition: background 0.3s ease;
    }

    button:hover {
      filter: brightness(1.2);
    }
  </style>
</head>
<body>

  <div class="card">
    <h1 class="text-2xl font-bold mb-6 text-center">Gerador de Códigos</h1>

    <div class="space-y-4">
      <div>
        <label class="block mb-1 font-semibold">Quantidade:</label>
        <input type="number" id="quantidade" value="5" min="1" class="w-full p-2 rounded-md bg-gray-700">
      </div>

      <div class="flex gap-2">
        <button id="gerarBtn" class="flex-1 bg-blue-600 rounded-md py-2 font-semibold">Gerar</button>
        <button id="baixarBtn" class="flex-1 bg-green-600 rounded-md py-2 font-semibold">Baixar CSV</button>
      </div>
    </div>

    <div id="result" class="mt-6 space-y-2 max-h-60 overflow-y-auto"></div>
  </div>

  <script>
    function gerarCodigoAleatorio() {
      const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";
      let letras = [];
      for (let i = 0; i < 5; i++) {
        letras.push(chars.charAt(Math.floor(Math.random() * chars.length)));
      }

      // gera o número
      const numero = Math.floor(Math.random() * 10).toString();

      // escolhe uma posição aleatória para inserir o número
      const posicao = Math.floor(Math.random() * 6); // 0 a 5
      letras.splice(posicao, 0, numero);

      return letras.join("");
    }

    const gerarBtn = document.getElementById("gerarBtn");
    const baixarBtn = document.getElementById("baixarBtn");
    const resultDiv = document.getElementById("result");
    let codigosGerados = [];

    gerarBtn.addEventListener("click", () => {
      resultDiv.innerHTML = "";
      codigosGerados = [];
      const quantidade = parseInt(document.getElementById("quantidade").value);

      for (let i = 0; i < quantidade; i++) {
        const codigo = gerarCodigoAleatorio();
        codigosGerados.push(codigo);
        const div = document.createElement("div");
        div.textContent = codigo;
        div.className = "codigo";
        resultDiv.appendChild(div);
      }
    });

    baixarBtn.addEventListener("click", () => {
      if(codigosGerados.length === 0){
        alert("Gere códigos antes de baixar!");
        return;
      }
      const csvContent = "data:text/csv;charset=utf-8," + codigosGerados.join("\n");
      const encodedUri = encodeURI(csvContent);
      const link = document.createElement("a");
      link.setAttribute("href", encodedUri);
      link.setAttribute("download", "codigos.csv");
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
    });
  </script>

</body>
</html>
